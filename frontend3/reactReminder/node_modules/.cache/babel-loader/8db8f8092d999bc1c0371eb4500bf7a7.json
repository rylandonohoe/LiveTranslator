{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = awaitify;\n// conditionally promisify a function.\n// only return a promise if a callback is omitted\nfunction awaitify(asyncFn, arity) {\n  if (!arity) arity = asyncFn.length;\n  if (!arity) throw new Error('arity is undefined');\n  function awaitable(...args) {\n    if (typeof args[arity - 1] === 'function') {\n      return asyncFn.apply(this, args);\n    }\n    return new Promise((resolve, reject) => {\n      args[arity - 1] = (err, ...cbArgs) => {\n        if (err) return reject(err);\n        resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0]);\n      };\n      asyncFn.apply(this, args);\n    });\n  }\n  return awaitable;\n}\nmodule.exports = exports.default;","map":null,"metadata":{},"sourceType":"script"}