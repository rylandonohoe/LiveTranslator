{"ast":null,"code":"'use strict';\n\nconst mimicFn = require('mimic-fn');\nconst calledFunctions = new WeakMap();\nconst onetime = (function_, options = {}) => {\n  if (typeof function_ !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  let returnValue;\n  let callCount = 0;\n  const functionName = function_.displayName || function_.name || '<anonymous>';\n  const onetime = function (...arguments_) {\n    calledFunctions.set(onetime, ++callCount);\n    if (callCount === 1) {\n      returnValue = function_.apply(this, arguments_);\n      function_ = null;\n    } else if (options.throw === true) {\n      throw new Error(\"Function `\".concat(functionName, \"` can only be called once\"));\n    }\n    return returnValue;\n  };\n  mimicFn(onetime, function_);\n  calledFunctions.set(onetime, callCount);\n  return onetime;\n};\nmodule.exports = onetime;\n// TODO: Remove this for the next major release\nmodule.exports.default = onetime;\nmodule.exports.callCount = function_ => {\n  if (!calledFunctions.has(function_)) {\n    throw new Error(\"The given function `\".concat(function_.name, \"` is not wrapped by the `onetime` package\"));\n  }\n  return calledFunctions.get(function_);\n};","map":null,"metadata":{},"sourceType":"script"}