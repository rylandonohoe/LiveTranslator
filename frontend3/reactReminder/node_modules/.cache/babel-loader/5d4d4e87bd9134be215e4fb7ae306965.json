{"ast":null,"code":"let _fs;\ntry {\n  _fs = require('graceful-fs');\n} catch (_) {\n  _fs = require('fs');\n}\nconst universalify = require('universalify');\nconst _require = require('./utils'),\n  stringify = _require.stringify,\n  stripBom = _require.stripBom;\nasync function _readFile(file, options = {}) {\n  if (typeof options === 'string') {\n    options = {\n      encoding: options\n    };\n  }\n  const fs = options.fs || _fs;\n  const shouldThrow = 'throws' in options ? options.throws : true;\n  let data = await universalify.fromCallback(fs.readFile)(file, options);\n  data = stripBom(data);\n  let obj;\n  try {\n    obj = JSON.parse(data, options ? options.reviver : null);\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = \"\".concat(file, \": \").concat(err.message);\n      throw err;\n    } else {\n      return null;\n    }\n  }\n  return obj;\n}\nconst readFile = universalify.fromPromise(_readFile);\nfunction readFileSync(file, options = {}) {\n  if (typeof options === 'string') {\n    options = {\n      encoding: options\n    };\n  }\n  const fs = options.fs || _fs;\n  const shouldThrow = 'throws' in options ? options.throws : true;\n  try {\n    let content = fs.readFileSync(file, options);\n    content = stripBom(content);\n    return JSON.parse(content, options.reviver);\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = \"\".concat(file, \": \").concat(err.message);\n      throw err;\n    } else {\n      return null;\n    }\n  }\n}\nasync function _writeFile(file, obj, options = {}) {\n  const fs = options.fs || _fs;\n  const str = stringify(obj, options);\n  await universalify.fromCallback(fs.writeFile)(file, str, options);\n}\nconst writeFile = universalify.fromPromise(_writeFile);\nfunction writeFileSync(file, obj, options = {}) {\n  const fs = options.fs || _fs;\n  const str = stringify(obj, options);\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options);\n}\nconst jsonfile = {\n  readFile,\n  readFileSync,\n  writeFile,\n  writeFileSync\n};\nmodule.exports = jsonfile;","map":null,"metadata":{},"sourceType":"script"}